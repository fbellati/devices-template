# This file support the concept TEMPLATE OF DEVICE.
# The template of a device define various characteristics of the device and support a single model with differents firmware and profiles (see later).
# The properties described HERE (on the template) are indipendent from the single INSTANCE of a device like one installed in a particular site. So these characteristics are generic and refere to all the sensor with same manufacturer and model.
# This is the description file in YAML format of a single template of a single device.
# The device can be a single sensor device or a device made by multiple sensors.
# Every sensor must have a ObservedProperty and unit of Measure.

# This is the version of the description file
fileFormatVersion: 2.0


common:
  # deviceName is a string, CANNOT include spaces, max 255 characters, must correspond to the filename of sensor
  # On SensorThings API is a part of the "name" of a -sensor entity- (please pay attention to the concept DEVICE (here) --> SENSOR (on sensorthings API)
  # Multiple datastreams (on SensorThings API) can refer to the same device because one device can have multiple sensors and one datastream refer to one and only one ObservedProperty
  # string - MANDATORY
  deviceName: virt-combined-sensor-paloma
  
  # deviceDescription is a string, can include spaces, max 255 characters, normally is a general description of general/non installed sensor
  # On SensorThings API is the description property of a sensor entity
  # string - MANDATORY
  deviceDescription: Virtual sensor of meda Paloma Facility from CNR-ISMAR Trieste. Data acces is through a dedicated mysql database
  
  # This normally is the "specific model" of device, if exist - Leave void if not exist
  # string - OPTIONAL
  devicePartNumber:
  
  # Describe if the device is physical or can be something like a external database or web service (virtual)
  # string - MANDATORY: "physical" or "virtual"
  deviceType: virtual
  
  # This define a general classification of the device.
  # You can search the class of your instruments here: https://gcmd.earthdata.nasa.gov/KeywordViewer/scheme/instruments?gtm_scheme=instruments
  # URL - OPTIONAL
  deviceClass: https://vocab.nerc.ac.uk/collection/L06/current/16/?_profile=nvs&_mediatype=application/rdf+xml
  
  # Some reference of the characteristics of the device
  # leave blank if unknow
  # strings - OPTIONAL
  productURL: https://www.ismar.cnr.it/cosa-facciamo/infrastrutture-oceanografiche/meda-paloma/
  datasheetURL: http://150.178.68.195/gc_apps/paloma_public/
  imageURL: https://www.icos-cp.eu/media/321
  
  # These data are optional
  # dataType can be 'istantaneous', 'cumulative measurement', 'various'
  # Can be 'various' if the sensor is made by multiple sensor working following different procedures
  # leave blank if unknow
  # OPTIONAL
  temporaryStorage: yes
  dataType: various
  outputDataFormat: database
  
  # The description of materials used on the device, leave blank if unknow
  # leave blank if unknow
  # string - OPTIONAL
  material:
  
  # the dimensions that describe the sensor are in cm. and weight in kg.
  # leave blank if unknow
  # floatingpoint32 - OPTIONAL
  dimensions:
    width: 0.0
    height: 0.0
    lenght: 0.0
    diameter: 0.0
    weight: 0.0

  
  # Power dimensions useful in case of maintenance, there is no constraints in description
  # leave blank if unknow. You can add your preferred keys under this section.
  # strings - OPTIONAL
  power:
    electricalCurrentType: DC
    inputPowerRange:
    batteryNominalOutput:
    batteryChargingVoltage:
    batteryChargingCurrent:
    yourPreferredDescriptionKey:
    
  # Operating condition are optional
  # leave blank if unknow
  # integer and floatingpoint values - OPTIONAL
  operatingConditions:
    # temperature in celsius degree
    temperature:
      min:
      max: 60
    # relative humidity (fraction of 1)
    relativeHumidity:
      min:
      max:
    # Pressure (dbar) 
    Pressure:
      min:0
      max:7000
      
  # Compliances informations
  # leave blank if unknow
  # strings - OPTIONAL
  compliances:
    standards:
    safety_norm:
    ipCode:
  
# Hardware versions - This refer to different hardware version of the same device, is similar, but can be different, of the PartNumber.
# This part of the description refer to the possibility to have different firmware (for different hardware version, on not) of the same device with the same product model.
# If this property is unknow you can use one of your choice (like '1.0.0'), it's only for reference.
# string and integer - MANDATORY (at least one!)
hwversions:
  - version:
    numeric:

# Firmware versions and profiles (at least one of each one is mandatory)
# For every different firmware version a device can have different features, different Observed Properties and/or can change the file format of output, changing the implementation driver for the normalization of data to to be inserted in the observations on SensorThings API database. So you shall define at least one firmware version and one profile.
# Sometimes you can have different profiles for the same device with the same firmware, e.g. when you have modular device with only a subset of sensors installed on it. If you do not know others 'profiles' for you device you can simply define a 'default' profile like in the example.
# When you will declare an instance for a sensor you will shall specify the corresponding firmware/profile version you want to use.
# You CAN'T leave this part of the description void.

firmwareVersions:
  # Firmware version
  # string and integer - MANDATORY (at least one!)
  V2.2.0:
    numeric: 1
  
    # Corresponding hardware versions compatible with the firmware defined above
    # string - OPTIONAL
    hardwareVersions:

    profiles:
      # Unique identifier of the profile (lowercase, alphanumeric with dashes, max 36 characters)
      # In this example the name of the profile is "default". You can define multiple profiles per single version of same firmware
      # string - MANDATORY
      default:
        # sensorComponents define every single measurement sensor installed on the device. For virtual sensors is the list of the observedProperties you can read from the external datasource. You must define at least one sensor component.
        # Every component shall define:
        #  observedPropertyName, 
        #  observedPropertyDefinition,
        #  observedPropertyDescription,
        #  observedPropertyProperties, (IS OPTIONAL!!)
        #  observedPropertyIso,
        #  observationType,
        #  unitOfMeasurement,
        #    unitOfMeasurementName,
        #    unitOfMeasurementSymbol,
        #    unitOfMeasurementDefinition
        # NOTES:
        # --> You can use the NERC or others vocabularies to populate observedPropertyDefinition and unitOfMeasurementDefinition
        # --> The observedPropertyProcedure is the procedure referred to method of measurement. If not necessary you can leave blank or not use this key (OPTIONAL)
        # --> "codec" key string: Is specific for every profile of every firmware. This define the file where is stored the link of the codec that transform the raw data from the datasource and normalize them in a format compatible with sensorthings api.
        # The accuracy is defined as: https://vocab.nerc.ac.uk/collection/W01/current/007/

        sensorComponents:
        # The name of the sensor is a reference name used in the instance of sensor
        # The name of the component is not reported in any part of the sensorthings api database, refere to the INSTANCE description for this.
        # All the sub-properties defined are strictly MANDATORY.
        # string - at least one component is MANDATORY
            # MANDATORY

          virt-combined-sensor-paloma-wtemp:
            observedPropertyName: TEMP
            observedPropertyDefinition: https://vocab.nerc.ac.uk/collection/P02/current/TEMP/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: Temperature of the water column
            observedPropertyProperties:
            # MANDATORY
            unitOfMeasurement:
              unitOfMeasurementName: Degrees Celsius
              unitOfMeasurementSymbol: degC
              unitOfMeasurementDefinition: http://vocab.nerc.ac.uk/collection/P06/current/UPAA/?_profile=nvs&_mediatype=application/rdf+xml

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # --> The observationType can have a limited number of values defined from OGC sensorthings API
            # see here: https://docs.ogc.org/is/15-078r6/15-078r6.html#table_12
            # OM_CategoryObservation  http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_CategoryObservation    URI
            # OM_CountObservation     http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_CountObservation       integer
            # OM_Measurement          http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement            double
            # OM_Observation          http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Observation            Any
            # OM_TruthObservation     http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_TruthObservation       boolean
            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement


          virt-combined-sensor-paloma-cond:
            # MANDATORY
            observedPropertyName: COND
            observedPropertyDefinition: http://vocab.nerc.ac.uk/collection/P02/current/CNDC/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: Electrical conductivity of the water column
            observedPropertyProperties:
            unitOfMeasurement:
              unitOfMeasurementName: Siemens per metre
              unitOfMeasurementSymbol: S/m
              unitOfMeasurementDefinition: 

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement


          virt-combined-sensor-paloma-pressure:
            # MANDATORY
            observedPropertyName: PRES
            observedPropertyDefinition: http://vocab.nerc.ac.uk/collection/P02/current/AHGT/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: Vertical spatial coordinates
            observedPropertyProperties:
            unitOfMeasurement:
              unitOfMeasurementName: Decibars
              unitOfMeasurementSymbol: dbar
              unitOfMeasurementDefinition: http://vocab.nerc.ac.uk/collection/P06/current/UPDB/?_profile=nvs&_mediatype=application/rdf+xml

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement

          virt-combined-sensor-paloma-salinity:
            # MANDATORY
            observedPropertyName: SAL
            observedPropertyDefinition: https://vocab.nerc.ac.uk/collection/P02/current/PSAL/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: Salinity of the water column
            observedPropertyProperties:
            unitOfMeasurement:
              unitOfMeasurementName: Practical salinity units
              unitOfMeasurementSymbol: PSU
              unitOfMeasurementDefinition: http://vocab.nerc.ac.uk/collection/P06/current/PSUX/?_profile=nvs&_mediatype=application/rdf+xml

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement

          virt-combined-sensor-paloma-density:
            # MANDATORY
            observedPropertyName: DENS
            observedPropertyDefinition: http://vocab.nerc.ac.uk/collection/P02/current/SIGT/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: Density of the water column
            observedPropertyProperties:
            # TODO confirm unitOfMeasurement
            unitOfMeasurement:
              unitOfMeasurementName:
              unitOfMeasurementSymbol:
              unitOfMeasurementDefinition:

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement

          virt-combined-sensor-paloma-oxygen:
            # MANDATORY
            observedPropertyName: OOXYG
            observedPropertyDefinition: http://vocab.nerc.ac.uk/collection/P02/current/DOXY/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: Dissolved oxygen parameters in the water column
            observedPropertyProperties:
            unitOfMeasurement:
              unitOfMeasurementName: Millilitres per litre
              unitOfMeasurementSymbol: ml/L
              unitOfMeasurementDefinition: http://vocab.nerc.ac.uk/collection/P06/current/UMLL/?_profile=nvs&_mediatype=application/rdf+xml

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement

          virt-combined-sensor-paloma-oxygensat:
            # MANDATORY
            observedPropertyName: OOXSAT
            observedPropertyDefinition: http://vocab.nerc.ac.uk/collection/P02/current/DOXY/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: Dissolved oxygen parameters in the water column (saturation)
            observedPropertyProperties:
            unitOfMeasurement:
              unitOfMeasurementName: percent
              unitOfMeasurementSymbol: %
              unitOfMeasurementDefinition: http://vocab.nerc.ac.uk/collection/P06/current/UPCT/?_profile=nvs&_mediatype=application/rdf+xml

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement

          virt-combined-sensor-paloma-turbidity:
            # MANDATORY
            observedPropertyName: TURB1
            observedPropertyDefinition: http://vocab.nerc.ac.uk/collection/R03/current/TURBIDITY/?_profile=nvs&_mediatype=application/rdf+xml
            observedPropertyDescription: seawater turbidity
            observedPropertyProperties:
            unitOfMeasurement:
              unitOfMeasurementName: Nephelometric Turbidity Units
              unitOfMeasurementSymbol: NTU
              unitOfMeasurementDefinition: Nephelometric Turbidity Units

            # OPTIONAL
            accuracy:
              observationAccuracy:
              observationAccuracyUoSymbol:
              observationAccuracyUoMDefinition:

            # OPTIONAL
            resolution:
              observationResolution:
              observationResolutionSymbol:
              observationUoMDefinition:

            # MANDATORY
            observedPropertyProcedure:
            observationType: http://www.opengis.net/def/observationType/OGC-OM/2.0/OM_Measurement
      # string - MANDATORY
      codec: virt-combined-sensor-codec.yml


